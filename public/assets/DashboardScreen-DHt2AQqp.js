import{r as m,g as P,a as $,s as j,c as n,m as I,b as K,u as M,j as t,d as y,e as D,f as X,S as q,T,L as x,h as B,i as Y,R as O,A as xr,k as mr,l as rr,n as br,B as z,o as hr,p as yr,q as Br,E as Or,O as jr}from"./index-Y91MOtxq.js";import{S as Ar}from"./SelectThemeMode-DyLLG6U4.js";import{M as Cr}from"./Select-It-sKpq1.js";import{B as Rr}from"./Box-C7Q6lQnf.js";import{D as kr}from"./Divider-6e9HeHrJ.js";import{I as N}from"./IconButton-9uYGQQG5.js";import{A as Tr}from"./Avatar-6iMMLUcH.js";import{A as zr}from"./DrawerItem-CBe824PN.js";import{u as Z}from"./react-is.production.min-45l22EfV.js";import{P as or}from"./useSlot-BWqUzJVS.js";import{R as Pr}from"./RoomsList-BUfyCx7-.js";import{u as $r}from"./DrawerTitle-DeF7vu0Q.js";import{L as Ir}from"./LinearProgress-DkWLgsYn.js";import"./List-3WCtkJeu.js";import"./dividerClasses-CJRI5ykF.js";import"./listItemTextClasses-DwCMJgWE.js";import"./InputBase-DrHRt9EZ.js";import"./useFormControl-BT_-7oMV.js";import"./ownerWindow-DIR61fab.js";import"./useTheme-BuMe12sB.js";import"./useControlled-CKAdOX-G.js";import"./Room-DqRT2TwW.js";import"./Stack-CAwgmJez.js";const tr=r=>{const o=m.useRef({});return m.useEffect(()=>{o.current=r}),o.current};function Mr(r){return P("MuiAppBar",r)}$("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Dr=r=>{const{color:o,position:a,classes:s}=r,i={root:["root",`color${n(o)}`,`position${n(a)}`]};return D(i,Mr,s)},Q=(r,o)=>r?`${r==null?void 0:r.replace(")","")}, ${o})`:o,Nr=j(or,{name:"MuiAppBar",slot:"Root",overridesResolver:(r,o)=>{const{ownerState:a}=r;return[o.root,o[`position${n(a.position)}`],o[`color${n(a.color)}`]]}})(I(({theme:r})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":r.vars?r.vars.palette.AppBar.defaultBg:r.palette.grey[100],"--AppBar-color":r.vars?r.vars.palette.text.primary:r.palette.getContrastText(r.palette.grey[100]),...r.applyStyles("dark",{"--AppBar-background":r.vars?r.vars.palette.AppBar.defaultBg:r.palette.grey[900],"--AppBar-color":r.vars?r.vars.palette.text.primary:r.palette.getContrastText(r.palette.grey[900])})}},...Object.entries(r.palette).filter(K(["contrastText"])).map(([o])=>({props:{color:o},style:{"--AppBar-background":(r.vars??r).palette[o].main,"--AppBar-color":(r.vars??r).palette[o].contrastText}})),{props:o=>o.enableColorOnDark===!0&&!["inherit","transparent"].includes(o.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:o=>o.enableColorOnDark===!1&&!["inherit","transparent"].includes(o.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...r.applyStyles("dark",{backgroundColor:r.vars?Q(r.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:r.vars?Q(r.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...r.applyStyles("dark",{backgroundImage:"none"})}}]}))),Lr=m.forwardRef(function(o,a){const s=M({props:o,name:"MuiAppBar"}),{className:i,color:l="primary",enableColorOnDark:c=!1,position:e="fixed",...p}=s,d={...s,color:l,position:e,enableColorOnDark:c},v=Dr(d);return t.jsx(Nr,{square:!0,component:"header",ownerState:d,elevation:4,className:y(v.root,i,e==="fixed"&&"mui-fixed"),ref:a,...p})});function Sr(r){const{badgeContent:o,invisible:a=!1,max:s=99,showZero:i=!1}=r,l=tr({badgeContent:o,max:s});let c=a;a===!1&&o===0&&!i&&(c=!0);const{badgeContent:e,max:p=s}=c?l:r,d=e&&Number(e)>p?`${p}+`:e;return{badgeContent:e,invisible:c,max:p,displayValue:d}}function wr(r){return P("MuiBadge",r)}const g=$("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),R=10,k=4,Ur=r=>{const{color:o,anchorOrigin:a,invisible:s,overlap:i,variant:l,classes:c={}}=r,e={root:["root"],badge:["badge",l,s&&"invisible",`anchorOrigin${n(a.vertical)}${n(a.horizontal)}`,`anchorOrigin${n(a.vertical)}${n(a.horizontal)}${n(i)}`,`overlap${n(i)}`,o!=="default"&&`color${n(o)}`]};return D(e,wr,c)},Er=j("span",{name:"MuiBadge",slot:"Root",overridesResolver:(r,o)=>o.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Fr=j("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(r,o)=>{const{ownerState:a}=r;return[o.badge,o[a.variant],o[`anchorOrigin${n(a.anchorOrigin.vertical)}${n(a.anchorOrigin.horizontal)}${n(a.overlap)}`],a.color!=="default"&&o[`color${n(a.color)}`],a.invisible&&o.invisible]}})(I(({theme:r})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(12),minWidth:R*2,lineHeight:1,padding:"0 6px",height:R*2,borderRadius:R,zIndex:1,transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.enteringScreen}),variants:[...Object.entries(r.palette).filter(K(["contrastText"])).map(([o])=>({props:{color:o},style:{backgroundColor:(r.vars||r).palette[o].main,color:(r.vars||r).palette[o].contrastText}})),{props:{variant:"dot"},style:{borderRadius:k,height:k*2,minWidth:k*2,padding:0}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${g.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${g.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${g.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${g.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${g.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${g.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${g.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${g.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.leavingScreen})}}]})));function J(r){return{vertical:(r==null?void 0:r.vertical)??"top",horizontal:(r==null?void 0:r.horizontal)??"right"}}const Vr=m.forwardRef(function(o,a){const s=M({props:o,name:"MuiBadge"}),{anchorOrigin:i,className:l,classes:c,component:e,components:p={},componentsProps:d={},children:v,overlap:L="rectangular",color:S="default",invisible:ar=!1,max:sr=99,badgeContent:w,slots:u,slotProps:f,showZero:U=!1,variant:A="standard",...nr}=s,{badgeContent:E,invisible:ir,max:er,displayValue:lr}=Sr({max:sr,invisible:ar,badgeContent:w,showZero:U}),cr=tr({anchorOrigin:J(i),color:S,overlap:L,variant:A,badgeContent:w}),F=ir||E==null&&A!=="dot",{color:pr=S,overlap:dr=L,anchorOrigin:gr,variant:V=A}=F?cr:s,ur=J(gr),W=V!=="dot"?lr:void 0,C={...s,badgeContent:E,invisible:F,max:er,displayValue:W,showZero:U,anchorOrigin:ur,color:pr,overlap:dr,variant:V},_=Ur(C),H=(u==null?void 0:u.root)??p.Root??Er,G=(u==null?void 0:u.badge)??p.Badge??Fr,b=(f==null?void 0:f.root)??d.root,h=(f==null?void 0:f.badge)??d.badge,fr=Z({elementType:H,externalSlotProps:b,externalForwardedProps:nr,additionalProps:{ref:a,as:e},ownerState:C,className:y(b==null?void 0:b.className,_.root,l)}),vr=Z({elementType:G,externalSlotProps:h,ownerState:C,className:y(_.badge,h==null?void 0:h.className)});return t.jsxs(H,{...fr,children:[v,t.jsx(G,{...vr,children:W})]})});function Wr(r){return P("MuiToolbar",r)}$("MuiToolbar",["root","gutters","regular","dense"]);const _r=r=>{const{classes:o,disableGutters:a,variant:s}=r;return D({root:["root",!a&&"gutters",s]},Wr,o)},Hr=j("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(r,o)=>{const{ownerState:a}=r;return[o.root,!a.disableGutters&&o.gutters,o[a.variant]]}})(I(({theme:r})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:o})=>!o.disableGutters,style:{paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:r.mixins.toolbar}]}))),Gr=m.forwardRef(function(o,a){const s=M({props:o,name:"MuiToolbar"}),{className:i,component:l="div",disableGutters:c=!1,variant:e="regular",...p}=s,d={...s,component:l,disableGutters:c,variant:e},v=_r(d);return t.jsx(Hr,{as:l,className:y(v.root,i),ref:a,ownerState:d,...p})}),qr=X(t.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),Zr=({anchorEl:r,setAnchorEl:o})=>t.jsx(Cr,{sx:{userSelect:"none"},anchorEl:r,open:!!r,onClick:()=>o(null),onClose:()=>o(null),children:t.jsxs(Rr,{children:[t.jsxs(q,{direction:"row",spacing:1,alignItems:"center",sx:{p:1},children:[t.jsx(T,{children:"Theme: "}),t.jsx(Ar,{})]}),t.jsx(kr,{sx:{my:2}}),t.jsx(x,{to:"/dashboard/settings",children:t.jsxs(q,{direction:"row",sx:{p:1},children:[t.jsx(qr,{})," Settings"]})})]})}),Qr=()=>{const r=B(Y),[o,a]=O.useState(null);return t.jsxs(O.Fragment,{children:[t.jsx(Zr,{anchorEl:o,setAnchorEl:a}),t.jsx(N,{size:"small",onClick:s=>a(s.currentTarget),children:t.jsx(Tr,{sx:{width:35,height:35},src:`${xr}api/users/${r==null?void 0:r.username}/image`})})]})},Jr=X(t.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNone"),Kr=()=>{const r=B(mr),o=rr();return t.jsx(x,{to:"/dashboard/settings/invitations",onClick:()=>o(br()),children:t.jsx(N,{size:"small",children:t.jsx(Vr,{badgeContent:r,max:99,color:"primary",children:t.jsx(Jr,{})})})})},Xr=()=>t.jsx(Lr,{elevation:1,position:"relative",sx:{zIndex:10,justifyContent:"center",bgcolor:"background.paper",color:"text.primary"},children:t.jsxs(Gr,{variant:"dense",children:[t.jsx(x,{to:"/dashboard",children:t.jsx(T,{variant:"h5",children:"Chat"})}),t.jsx(x,{to:"rooms",children:t.jsx(T,{sx:{pl:2,":hover":{color:"primary.dark"}},variant:"button",children:"Rooms"})}),t.jsx(z,{sx:{flex:1}}),t.jsx(x,{to:"/dashboard/rooms/new",title:"create new room",children:t.jsx(N,{size:"small",children:t.jsx(zr,{})})}),t.jsx(Kr,{}),t.jsx(Qr,{})]})}),jo=()=>{const r=$r("(max-width:600px)"),o=B(Y),a=rr(),s=B(hr);return O.useEffect(()=>{a(yr())},[a]),O.useEffect(()=>{o!=null&&o.id&&a(Br())},[o==null?void 0:o.id,a]),t.jsxs(z,{sx:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden",bgcolor:"background.paper"},children:[t.jsx(Xr,{}),(s==null?void 0:s.loading)&&t.jsx(Ir,{color:"primary",sx:{width:1}}),(s==null?void 0:s.error_status)&&t.jsx(Or,{status:s==null?void 0:s.error_status,errorText:s==null?void 0:s.statusText}),!(s!=null&&s.loading)&&!(s!=null&&s.error_status)&&t.jsxs(z,{sx:{width:"100%",flex:1,display:"flex",flexDirection:r?"column":"row",overflow:"hidden"},children:[t.jsx(Pr,{row:r}),t.jsx(or,{sx:{position:"relative",flex:1,height:"100%",borderRadius:0,backgroundColor:"background.default",overflow:"hidden"},children:t.jsx(jr,{})})]})]})};export{jo as default};
