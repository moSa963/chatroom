import{R as i,j as e,S as g,B as j,t as d,T as y,Q as p}from"./index-Y91MOtxq.js";import{P as E}from"./useSlot-BWqUzJVS.js";import{A as T}from"./Avatar-6iMMLUcH.js";import{B as S}from"./ButtonGroup-CLipGnnu.js";const v=({src:t,caption:r,link:o,enableDelete:n})=>{const[a,l]=i.useState(!1),[u,m]=i.useState(!1),[h,c]=i.useState(null),x=s=>{a||(s&&c(URL.createObjectURL(s)),b(s,l,o,m))},f=()=>{a||(c(null),B(o,l))};return e.jsxs(E,{sx:{width:"100%",display:"flex",p:1,alignItems:"center",border:"1px solid",borderColor:"divider"},children:[e.jsx(T,{sx:{width:90,height:90,mr:5},src:h||t}),e.jsxs(g,{spacing:2,children:[e.jsx(j,{children:e.jsxs(S,{size:"small",children:[e.jsxs(d,{disabled:a,onClick:s=>s.currentTarget.children[0].click(),color:u?"error":"primary",children:[e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:s=>x(s.currentTarget.files[0])}),"UPDATE"]}),n&&e.jsx(d,{disabled:a||!t,color:"error",onClick:f,children:"DELETE"})]})}),e.jsx(y,{variant:"caption",children:r})]})]})},b=async(t,r,o,n)=>{r(!0),!(await p(o,"POST",{image:t})).ok&&n(!0),r(!1)},B=async(t,r)=>{r(!0),await p(t,"DELETE"),r(!1)};export{v as U};
