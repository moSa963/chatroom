import{f as u,j as e,R as i,B as c,T as d,t as x,Q as f,W as j}from"./index-Y91MOtxq.js";import{L as h}from"./PaginationList-e3kwctgY.js";import{P as g}from"./useSlot-BWqUzJVS.js";import{I as S}from"./InputBase-DrHRt9EZ.js";import{U as y}from"./User-Cs4iAe2Q.js";import{D as v}from"./Divider-6e9HeHrJ.js";import"./SearchBar-DcL_XB2Y.js";import"./DrawerItem-CBe824PN.js";import"./Avatar-6iMMLUcH.js";import"./IconButton-9uYGQQG5.js";import"./CircularProgress-By7L-KH3.js";import"./useTheme-BuMe12sB.js";import"./useFormControl-BT_-7oMV.js";import"./ownerWindow-DIR61fab.js";import"./dividerClasses-CJRI5ykF.js";const I=u(e.jsx("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),w=({room:s})=>{const[t,r]=i.useState(""),[n,o]=i.useState({error:!1,message:""}),[a,l]=i.useState(!1),p=()=>{a||R(s,t,r,o,l)};return e.jsxs(c,{children:[e.jsx(d,{variant:"caption",children:"Send an invitation:"}),e.jsxs(g,{sx:{flex:1,width:"100%",borderRadius:2,display:"flex",overflow:"hidden"},children:[e.jsx(S,{onKeyUp:m=>m.key==="Enter"&&p,value:t,onChange:m=>r(m.currentTarget.value),placeholder:"Username...",sx:{width:"100%",px:2}}),e.jsx(x,{onClick:p,disabled:t==="",title:"send invite",children:e.jsx(I,{})})]}),e.jsx(d,{sx:{mb:3,pl:2},color:n.error?"error":"green",children:n.message})]})},R=async(s,t,r,n,o)=>{o(!0);const a=await f(`api/rooms/${s.id}/invitations/${t}`,"POST");if(a.ok){r(""),n({error:!1,message:"invite sent successfully"}),o(!1);return}const l=await a.json();n({error:!0,message:l.message}),o(!1)},F=()=>{const[s]=j();return e.jsxs(c,{children:[e.jsx(w,{room:s}),e.jsx(h,{url:`api/rooms/${s==null?void 0:s.id}/users`,generator:([t])=>t.map((r,n)=>e.jsxs(i.Fragment,{children:[e.jsx(y,{user:r,room:s,fullWidth:!0}),e.jsx(v,{sx:{my:1}})]},r==null?void 0:r.id))})]})};export{F as default};
