import{R as m,j as e,A as l,t as c,Q as p,W as d,B as x}from"./index-Y91MOtxq.js";import{L as f}from"./PaginationList-e3kwctgY.js";import{D as h}from"./DrawerItem-CBe824PN.js";import{L as j}from"./LinearProgress-DkWLgsYn.js";import{B as $}from"./Box-C7Q6lQnf.js";import{B}from"./ButtonGroup-CLipGnnu.js";import"./SearchBar-DcL_XB2Y.js";import"./useSlot-BWqUzJVS.js";import"./useTheme-BuMe12sB.js";import"./InputBase-DrHRt9EZ.js";import"./useFormControl-BT_-7oMV.js";import"./ownerWindow-DIR61fab.js";import"./IconButton-9uYGQQG5.js";import"./CircularProgress-By7L-KH3.js";import"./Avatar-6iMMLUcH.js";const R=({req:s,room:i,setRequests:n})=>{var u;const[t,o]=m.useState(!1),r=()=>{t||k(s,i,n,o)},a=()=>{t||L(s,i,n,o)};return e.jsxs(h,{fullWidth:!0,text:s==null?void 0:s.user.name,to:`/dashboard/users/${s==null?void 0:s.user.username}`,secondaryText:`@${s==null?void 0:s.user.username}`,src:`${l}api/users/${(u=s==null?void 0:s.user)==null?void 0:u.username}/image`,children:[t&&e.jsx(j,{sx:{width:.4}}),e.jsx($,{children:e.jsxs(B,{size:"small",variant:"text",children:[e.jsx(c,{color:"error",onClick:r,children:"delete"}),e.jsx(c,{onClick:a,children:"accept"})]})})]})},L=async(s,i,n,t)=>{t(!0);const o=await p(`api/rooms/${i==null?void 0:i.id}/requests/${s==null?void 0:s.id}/accept`,"POST");t(!1),o.ok&&n(r=>r.filter(a=>(a==null?void 0:a.id)!==(s==null?void 0:s.id)))},k=async(s,i,n,t)=>{t(!0);const o=await p(`api/rooms/${i==null?void 0:i.id}/users/${s==null?void 0:s.user.username}`,"DELETE");t(!1),o.ok&&n(r=>r.filter(a=>(a==null?void 0:a.id)!==(s==null?void 0:s.id)))},G=()=>{const[s]=d();return e.jsx(x,{children:e.jsx(f,{url:`api/rooms/${s==null?void 0:s.id}/requests`,generator:([i,n])=>i.map((t,o)=>e.jsx(R,{req:t,room:s,setRequests:n},t==null?void 0:t.id))})})};export{G as default};
